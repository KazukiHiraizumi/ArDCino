# Algor.cpp IntervalPredictor

加速時の次のインタバル予測アルゴリズム

## 設問  
- 定変位(1回転)サンプリング時に、周期$t_0$、$t_{-1}$から次の周期$t_{1}$を予測する。
- 対象は等加速度運動とみなす。

## 解答
定変位を*h*としたとき、サンプリング時の速度$v_{-2}$、$v_{-1}$、$v_{0}$とすると
$$
v_{-1}+v_{-2}=\frac{2 h}{t_{-1}} \\
v_{0}+v_{-1}=\frac{2 h}{t_{0}}
$$
この間、等加速度運動をしているなら、以下が成立とする。
$$
\frac{v_{-1}-v_{-2}}{t_{-1}}=\frac{v_{0}-v_{-1}}{t_{0}}
$$
以上から、$v_{-2}$、$v_{-1}$、$v_{0}$を求解する。
$$
v_{-1}=\frac{h(t_{0}^2+t_{-1}^2)}{t_{0}t_{-1}(t_{0}+t_{-1})}
$$
$$
v_{-2}=\frac{h(t_{0}^2-t_{-1}^2+2t_{0}t_{-1})}{t_{0}t_{-1}(t_{0}+t_{-1})}
$$
$$
v_{0}=\frac{h(-t_{0}^2+t_{-1}^2+2t_{0}t_{-1})}{t_{0}t_{-1}(t_{0}+t_{-1})}
$$
次の区間(添字1)も同じ加速度で運動しているとすると、以下が成立。$\alpha$は加速度。
$$
v_{1}+v_{0}=\frac{2 h}{t_{1}}\\
\frac{v_{1}-v_{0}}{t_{1}}=\alpha
$$
ここから$t_{1}$の式を得る
$$
\alpha t_{1}^2+2 v_{0} t_{1}-2h=0
$$
よって
$$
t_{1}=-\frac{v_{0}}{\alpha}+\sqrt{(\frac{v_{0}}{\alpha})^2+\frac{2h}{\alpha}}
$$
ただし
$$
\frac{v_{0}}{\alpha}=\frac{-t_{0}^2+t_{-1}^2+2t_{0}t_{-1}}{2(-t_{0}+t_{-1}))}
$$
$$
\frac{2h}{\alpha}=\frac{t_{0}t_{-1}(t_{0}+t_{-1})}{2(-t_{0}+t_{-1}))}
$$